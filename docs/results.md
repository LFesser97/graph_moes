# Results

in results/

# Results Directory

This document explains the files generated in the `/results` directory and the code responsible for creating them.

##  experiments  
‚îú‚îÄ‚îÄ 6_layers/                    # Pickle files for 6-layer experiments
‚îú‚îÄ‚îÄ 7_layers/                    # Pickle files for 7-layer experiments
‚îú‚îÄ‚îÄ graph_classification_*.csv   # CSV results for classification experiments
‚îú‚îÄ‚îÄ graph_regression_*.csv       # CSV results for regression experiments
‚îú‚îÄ‚îÄ graph_classification.txt     # Text log for classification experiments
‚îî‚îÄ‚îÄ graph_regression.txt         # Text log for regression experiments


## üìä File Types Generated

### 1. **CSV Results Files**
**Format**: `graph_{classification|regression}_{layer_type}_{encoding}.csv`

**Examples**:
- `graph_classification_GCN_None.csv`
- `graph_classification_MoE_None.csv`
- `graph_classification_GIN_None.csv`
- `graph_classification_Unitary_None.csv`

**Content**: Statistical results from multiple experimental trials including:
- Dataset name
- Model configuration (layer type, encoding, hyperparameters)
- Test/validation/training accuracy means and confidence intervals
- Energy consumption metrics
- Runtime duration

**Generated by**/enzymes_MoE_None_graph_dict.pickle`
- `6_layers/proteins_GIN_None_graph_dict.pickle`
- `7_layers/mutag_Unitary_None_graph_dict.pickle`

**Content**: Detailed per-graph performance dictionaries for analysis, containing individual graph errors/accuracies.

**Generated by**:
```python
# In run_graph_regression.py (lines 208-213) - ACTIVE
with open(f"results/{args.num_layers}_layers/{key}_{args.layer_type}_{args.encoding}_graph_dict.pickle", "wb") as f:
    pickle.dump(graph_dict, f)

# In run_graph_classification.py (lines 304-306) - COMMENTED OUT
# with open(f"results/{args.num_layers}_layers/{key}_{args.layer_type}_{args.encoding}_graph_dict.pickle", "wb") as f:
#     pickle.dump(graph_dict, f)
```

**Note**: Currently only regression experiments generate pickle files. Classification pickle generation is commented out.

### 3. **Text Log Files**
**Files**:
- `graph_classification.txt`
- `graph_regression.txt`

**Content**: Human-readable experiment logs with summary results for each dataset-model combination.

**Generated by**:
```python
# log_to_file function in both scripts
def log_to_file(message, filename="results/graph_classification.txt"):
    print(message)
    file = open(filename, "a")
    file.write(message)
    file.close()

# Usage examples:
log_to_file(f"RESULTS FOR {key} ({args.layer_type}), with {args.encoding}:\n")
log_to_file(f"average acc: {test_mean}\n")
log_to_file(f"plus/minus: {test_ci}\n\n")
```

## üöÄ Code Responsible for File Generation

### Main Entry Points

1. **`run_graph_classification.py`** 
   - Generates classification results
   - CSV files: `graph_classification_{layer_type}_{encoding}.csv`
   - Text log: `graph_classification.txt`
   - Pickle files: Currently disabled (commented out)

2. **`run_graph_regression.py`** 
   - Generates regression results  
   - CSV files: `graph_regression_{layer_type}_{encoding}.csv`
   - Text log: `graph_regression.txt`
   - Pickle files: `{num_layers}_layers/{dataset}_{layer_type}_{encoding}_graph_dict.pickle`

### Execution Flow

1. **Experiment Loop**: Scripts run multiple trials for each dataset-model combination
2. **Results Collection**: Each trial collects metrics (accuracy, energy, runtime)
3. **Statistics Calculation**: Compute means and confidence intervals across trials
4. **File Writing**:
   - **CSV**: Append one row per dataset-model combination
   - **Text Log**: Append human-readable summaries  
   - **Pickle**: Save detailed per-graph analysis data

### Triggered By

- **Direct execution**:
  ```bash
  python run_graph_classification.py --dataset mutag --layer_type GCN
  ```

- **Bash sweep scripts** in `bash_interface/`:
  ```bash
  python run_graph_classification.py \
      --num_trials 10 \
      --dataset "enzymes" \
      --learning_rate "0.001" \
      --hidden_dim "64" \
      --num_layers "4" \
      --dropout "0.0" \
      --patience 50 \
      --layer_types '["GCN", "GIN"]'
  ```

## üìà File Naming Convention

| File Type | Pattern | Example |
|-----------|---------|---------|
| CSV Results | `graph_{task}_{layer_type}_{encoding}.csv` | `graph_classification_MoE_None.csv` |
| Pickle Data | `{layers}_layers/{dataset}_{layer_type}_{encoding}_graph_dict.pickle` | `4_layers/enzymes_GCN_None_graph_dict.pickle` |
| Text Logs | `graph_{task}.txt` | `graph_classification.txt` |

Where:
- `{task}`: `classification` or `regression`
- `{layer_type}`: `GCN`, `GIN`, `MoE`, `MLP`, `Unitary`
- `{encoding}`: `None`, `LCP`, `LDP`, `E` (energy-based)
- `{layers}`: Number of layers (4, 5, 6, 7)
- `{dataset}`: Dataset name (enzymes, proteins, mutag, etc.)

## üîç Understanding the Results

- **CSV files**: Best for statistical analysis and comparisons across models/datasets
- **Pickle files**: Best for detailed per-graph analysis and debugging
- **Text logs**: Best for human-readable experiment summaries and quick results checking

The results directory provides a comprehensive record of all experimental runs, organized systematically for easy analysis and comparison of different model architectures and hyperparameter configurations.